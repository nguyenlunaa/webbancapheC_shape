@model WebCafe.Models.SanPham

@{
    ViewBag.Title = "Chi tiết sản phẩm";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="bg-light py-3">
    <div class="container">
        <div class="row">
            <div class="col-md-12 mb-0"><a href="index.html">Trang chủ</a> <span class="mx-2 mb-0">/</span> <strong class="text-black">@Model.TenSP</strong></div>
        </div>
    </div>
</div>

<div class="site-section">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <img src="~/Upload/sanpham/@Model.HinhAnh" alt="Image" class="img-fluid">
            </div>
            <div class="col-md-6">
                <h2 class="text-black text-center">@Model.TenSP</h2>
                <br />
                <div class="row">
                    <div class="col-md-6" style="color: black;">
                        <p class="text-lg-center" style="font-family: 'Tahoma', Tahoma, Geneva, Verdana, sans-serif; margin-bottom: 0px;">
                            <i class="mdi mdi-map-marker-radius" style="font-size:20px;"></i>
                            NGUỒN GỐC
                        </p>
                        <p class="text-center" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size:17px; ;">
                            @Model.NguonGoc
                        </p>
                    </div>
                    <div class="col-md-6" style="color: black;">
                        <p class="text-lg-center" style="font-family: 'Tahoma', Tahoma, Geneva, Verdana, sans-serif; margin-bottom: 0px;">
                            <i class="mdi mdi-peanut" style="font-size:20px;"></i>
                            LOẠI HẠT
                        </p>
                        <p class="text-center" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size:17px; ;">
                            @Model.LoaiSanPham.TenLoai
                        </p>
                    </div>
                    <div class="col-md-6" style="color: black;">
                        <p class="text-lg-center" style="font-family: 'Tahoma', Tahoma, Geneva, Verdana, sans-serif; margin-bottom: 0px;">
                            <i class="mdi mdi-weight-gram" style="font-size:20px;"></i>
                            KHỐI LƯỢNG
                        </p>
                        <p class="text-center" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size:17px; ;">
                            @Model.KhoiLuong g
                        </p>
                    </div>
                    <div class="col-md-6" style="color: black;">
                        <p class="text-lg-center" style="font-family: 'Tahoma', Tahoma, Geneva, Verdana, sans-serif; margin-bottom: 0px;">
                            <i class="mdi mdi-spin mdi-star" style="font-size:20px;"></i>
                            NGUYÊN CHẤT
                        </p>
                        <p class="text-center" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size:17px; ;">
                            100%
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <hr />
                    </div>
                    <div class="col-md-12">
                        <p class="text-lg-center text-black">Ship COD hoặc chuyển khoản</p>
                        <hr />
                    </div>
                    <div class="col-md-12">
                        <p class="text-lg-center"><strong class="text-dark h4">@ViewBag.FormatTien</strong></p>

                    </div>
                    <div class="col-md-6 mb-5">
                        <div class="input-group mb-3" style="max-width: 120px;">
                            <div class="input-group-prepend">
                                <button class="btn btn-outline-primary js-btn-minus" type="button">−</button>
                            </div>
                            <input type="text" class="form-control text-center" id="ipQuantity" value="1" placeholder="" aria-label="Example text with button addon" aria-describedby="button-addon1">
                            <div class="input-group-append">
                                <button class="btn btn-outline-primary js-btn-plus" type="button">+</button>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-6">
                        <p class="text-lg-center"><a href="#" id="addtocart" class="buy-now btn btn-sm btn-warning"><i class="mdi mdi-cart-arrow-down"></i>Thêm vào giỏ hàng</a></p>
                    </div>
                </div>



            </div>
            <div class="col-md-12">
                <br />
                <h4>GIỚI THIỆU SẢN PHẨM</h4>
                @Html.Raw(Model.Mota)
            </div>
        </div>
    </div>
</div>

<div class="site-section block-3 site-blocks-2 bg-light">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-7 site-section-heading text-center pt-4">
                <h2>Sản Phẩm Nổi Bật</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="nonloop-block-3 owl-carousel owl-loaded owl-drag">
                    @foreach (var item in ViewBag.SanPhamNoiBat)
                    {
                        <div class="item">
                            <div class="block-4 text-center">
                                <figure class="block-4-image">
                                    <img src="~/Upload/sanpham/@item.HinhAnh" alt="Image placeholder" class="img-fluid">
                                </figure>
                                <div class="block-4-text p-4">
                                    <h3><a href="/SanPham/ChiTiet/@item.MaSP">@item.TenSP</a></h3>
                                    <p class="mb-0">@item.NguonGoc</p>
                                    <p class="text-primary font-weight-bold">@String.Format("{0:0,0 vnđ}", item.DonGia) - @item.KhoiLuong g</p>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
@section ClientScript{

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script type="text/javascript">
    $(function () {
        $("#addtocart").click(function () {
            var model = {};
            //lấy id sản phẩm
            model.Id = @Model.MaSP;
            // lấy số lượng đặt hàng
            model.Quantity = $("#ipQuantity").val();
            debugger;
            $.ajax({
                type: "POST",
                url: '@Url.Action("AddToCart", "GioHang")',
                data:  JSON.stringify(model) ,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function () {
                    alert("Thêm giỏ hàng thành công!")
                    $('#CartCount').text(@Session["count"] + 1);
                },
                error: function () {
                    alert("Lỗi trong khi thêm vào giỏ hàng!");
                }
            });
            return false;
        });
    });
    </script>
}